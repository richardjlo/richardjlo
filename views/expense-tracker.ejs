<%- include('includes/head.ejs'); %>
  <body>
    <%- include('includes/nav.ejs'); %>
    <div class="container mt-5">
      <div class="row">
        <h1>Expense Tracker<h1>
      </div>
      <div class="row">
        <div class="table-responsive">
          <table class="table table-striped">
          <thead id="tableHeader">
            <tr>
              <th scope="col">Description</th>
              <th scope="col">Vendor</th>
              <th scope="col">Amount (in USD)</th>
              <th scope="col">Edit</th>
              <th scope="col">Delete</th>
            </tr>
          </thead>
          <tbody id="transactionsTable">
          </tbody>
        </table>
        </div>
      </div>
      <button type="button" class="btn btn-success float-right" data-toggle="modal" data-target="#newExpenseModal">Add Expense</button>
    </div>

    <div class="modal" id="newExpenseModal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">New Expense</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form id="newExpenseForm">
              <div class="form-group">
                <label for="description">What did you buy?</label>
                <input class="form-control" id="description">
              </div>
              <div class="form-group">
                <label for="vendor">Vendor</label>
                <input class="form-control" id="vendor">
              </div>
              <div class="form-group">
                <label for="amount">Amount (in USD)</label>
                <div class="input-group mb-2 mr-sm-2">
                  <div class="input-group-prepend">
                    <div class="input-group-text">$</div>
                  </div>
                  <input type="number" class="form-control" id="amount">
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-success" id="addExpense">Add Expense</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="updateExpenseModal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Update Expense</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form id="updateExpenseForm">
              <div class="form-group">
                <label for="description">What did you buy?</label>
                <input class="form-control" id="update-description">
              </div>
              <div class="form-group">
                <label for="vendor">Vendor</label>
                <input class="form-control" id="update-vendor">
              </div>
              <div class="form-group">
                <label for="amount">Amount (in USD)</label>
                <div class="input-group mb-2 mr-sm-2">
                  <div class="input-group-prepend">
                    <div class="input-group-text">$</div>
                  </div>
                  <input type="number" class="form-control" id="update-amount">
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-success" id="update-expense-btn">Update Expense</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyCDt4GDmJ7PBUh7AIhRdnD-kD5tleAzciQ",
        authDomain: "expense-tracker-a3686.firebaseapp.com",
        databaseURL: "https://expense-tracker-a3686.firebaseio.com",
        projectId: "expense-tracker-a3686",
        storageBucket: "expense-tracker-a3686.appspot.com",
        messagingSenderId: "487206506379"
      };
      firebase.initializeApp(config);
    </script>
    <%- include('includes/js.ejs'); %>
    <script type="text/javascript" src='/js/expense-tracker.js'></script>
  </body>
</html>
